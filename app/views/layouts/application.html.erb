<!DOCTYPE html>
<html>
<head>
  <title>Doorbell</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <%= stylesheet_link_tag    "application", media: "all", "data-turbolinks-track" => true %>
  <%= javascript_include_tag "application", "data-turbolinks-track" => true %>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
  <script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.js"></script>
  <script src="http://documentcloud.github.io/underscore/underscore-min.js"></script>
  <%= csrf_meta_tags %>
</head>
<body>

<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : '<%=ENV["FACEBOOK_KEY"]%>',                        // App ID from the app dashboard
      channelUrl : '//onmyway.dev/channel.html', // Channel file for x-domain comms
      status     : true,                                 // Check Facebook Login status
      xfbml      : true
    });

    // Additional initialization code such as adding Event Listeners goes here
    if (typeof load_friends == 'function') {
      load_friends();
    }
  };

  // Load the SDK asynchronously
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
</script>

<script>
_.templateSettings = {
  interpolate : /\{\{(.+?)\}\}/g
};
</script>


<%= yield %>

</body>
</html>
